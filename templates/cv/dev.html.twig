{# Fichier: cv/developpeur-web.html.twig #}

{# --- STRUCTURE DES DONNÉES DU CV DÉVELOPPEUR (Sans Vue.js) --- #}
{% set cv_dev_data = {
    'profil': {
        'nom': 'WETTA',
        'prenom': 'RENÉ',
        'titre': 'Développeur Web Full Stack (Symfony & PHP)',
        'accroche': "Développeur Full Stack en reconversion, spécialisé en **Symfony** et **PHP**, maîtrisant l'intégration Frontend moderne (JavaScript, HTML/CSS). Forte capacité d'adaptation, rigueur issue de 20 ans d'expérience opérationnelle, et autonomie dans le cycle de développement complet.",
        'linkedin_url': 'https://fr.linkedin.com/in/wetta-rene-perso'
    },
    'contact': {
        'tel': '06.42.02.56.29', 'email': 'wetta.rene@gmail.com', 'adresse': '14540 Bourguébus', 'web': 'je-developpe.fr'
    },
    'technical_skills_by_category': {
        'backend': {'title': 'BACK-END (Symfony / PHP)', 'color': 'bg-success', 'items': ['PHP (80%)', 'Symfony (75%)', 'MySQL (70%)', 'MongoDB (35%)']},
        'frontend': {'title': 'FRONT-END (JS / Intégration)', 'color': 'bg-info', 'items': ['Javascript (80%)', 'Html5 / Css3 (90%)', 'Sass / Bootstrap (80%)']},
        'tools': {'title': 'OUTILS & PRATIQUES', 'color': 'bg-warning', 'items': ['Git (Versioning)', 'VSCode', 'Fillezilla', 'Rigueur / Autonomie', 'Wordpress']},
    },
    'projects': [
        {'title': 'FakeMenu (Gestion de Menus/Restaurants)', 'period': '2024', 'url_detail': 'https://fakemenu.je-developpe.fr/', 'details': [
            'Plateforme web complète pour la gestion des menus, plats et tarifs pour des établissements (Restaurants, Bars...).',
            'Architecture **Symfony 6/7** : Mise en place d\'une API interne et gestion du backend métier (CRUD, Sécurité).',
            'Développement Front-end utilisant **Twig** pour le rendu et des composants **JavaScript** pour l\'interactivité.',
            'Démonstration de la maîtrise du cycle complet : Modélisation (Doctrine), Développement, et Déploiement.'
        ]},
        {'title': 'ERM Project (Outil de Gestion Documentaire)', 'period': '2023', 'url_detail': 'https://erm.je-developpe.fr/', 'details': [
            'Conception d\'un outil de gestion de l\'information ou des ressources internes (similaire à un GRC/GRD).',
            'Développement centré sur la robustesse et la performance en **PHP Natif** (ou framework léger) et MySQL.',
            'Focus sur la gestion des droits d\'accès et des utilisateurs, ainsi que sur l\'architecture des données.',
            'Intégration d\'une interface utilisateur Bootstrap avec un design responsive.'
        ]},
        {'title': 'Refaites Vos Jeux (Site Communautaire/Projet Externe)', 'period': '2023', 'url_detail': 'https://www.refaitesvosjeux.fr/', 'details': [
            'Contribution ou réalisation d\'un site à vocation communautaire et/ou e-commerce dans le secteur du jeu.',
            'Mise en œuvre des compétences d\'intégration (HTML5, CSS3/SASS) et d\'optimisation Front-end.',
            'Gestion d\'un CMS (potentiellement Wordpress) ou d\'un framework E-commerce.',
            'Projet démontrant l\'adaptabilité à des environnements de production variés.'
        ]},
    ],
    'experience_summary': {
        'title': 'EXPÉRIENCE PROFESSIONNELLE (Compétences Transférables)',
        'details': [
            {'title': 'Responsable de Centre & Manager', 'company': 'EUROMASTER', 'period': '2003 – Aujourd\'hui', 'missions': ['20 ans d\'expérience opérationnelle confirmant des compétences clés en Rigueur, Organisation, Autonomie et Analyse de Problèmes (essentiel pour le débogage).','Gestion de la performance et optimisation des procédures, compétences directement transposables à l\'optimisation de code et à la méthodologie de projet.']},
        ],
    },
    'education': [
        {'title': 'Développeur Web (Diplôme professionnel)', 'details': 'OPENCLASSROOM', 'year': '2024'},
        {'title': 'Baccalauréat Scientifique (Bac S)', 'details': '', 'year': ''}
    ],
    'interests': ['Code informatique', 'Vélo & Tennis de table (club)'],
} %}

{# Attribution des variables Twig #}
{% set profil = cv_dev_data.profil %}
{% set contact = cv_dev_data.contact %}
{% set technical_skills = cv_dev_data.technical_skills_by_category %}
{% set projects = cv_dev_data.projects %}
{% set experience = cv_dev_data.experience_summary %}
{% set education = cv_dev_data.education %}
{% set interests = cv_dev_data.interests %}

{# total_views est transmis par le contrôleur (gère le cas où il ne serait pas défini pour la démo) #}
{% set total_views = total_views is defined ? total_views : 0 %}

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Développeur - {{ profil.prenom }} {{ profil.nom }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        body { background-color: #f8f9fa; }
        .cv-container { box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .sidebar { background-color: #2c3e50; color: white; padding: 2rem; }
        .main-content { padding: 2rem; background-color: white; }
        .section-title { color: #3498db; border-bottom: 3px solid #3498db; padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        .experience-header { margin-top: 1.5rem; }
        .skill-badge { margin: 0.25rem; font-weight: 500; }
        .footer-message { 
            margin-top: 3rem; 
            padding: 1.5rem; 
            background-color: #f0f8ff; 
            border-radius: 8px; 
            text-align: center; 
            border: 1px solid #3498db; 
            opacity: 0; 
            transition: opacity 0.8s ease-in-out;
        }
        .footer-message.visible { 
            opacity: 1; 
        }
        /* Style pour masquer les détails lors de l'impression */
        @media print {
            .project-details { display: none; }
            .print-hidden { display: none; }
        }
    </style>
</head>
<body>

<div class="container cv-container mt-5 mb-5 rounded">
    <div class="row g-0">
        
        {# COLONNE DE GAUCHE : IDENTITÉ & COMPÉTENCES TECHNIQUES FORTES #}
        <div class="col-lg-4 sidebar rounded-start">
            <div class="text-center mb-4">
                <h1 class="display-5 fw-bold text-uppercase">{{ profil.nom }}</h1>
                <h2 class="h3 fw-light">{{ profil.prenom }}</h2>
                <span class="badge bg-danger text-white p-2 mt-2 fw-bold">{{ profil.titre }}</span>
                
                <p class="mt-2 mb-0">
                    <a href="{{ profil.linkedin_url }}" target="_blank" class="text-white text-decoration-none small fw-bold">
                        <i class="bi bi-linkedin me-1"></i> Profil LinkedIn
                    </a>
                </p>
            </div>

            <hr class="border-light opacity-50">
            
            <h3 class="h5 mt-4 mb-3 text-warning">CONTACT</h3>
            <ul class="list-unstyled small">
                <li><i class="bi bi-phone"></i> Tél: {{ contact.tel }}</li>
                <li><i class="bi bi-envelope"></i> Email: {{ contact.email }}</li>
                <li><i class="bi bi-geo-alt"></i> Adresse: {{ contact.adresse }}</li>
                <li><i class="bi bi-globe"></i> Web: <a href="http://{{ contact.web }}" target="_blank" class="text-white text-decoration-none fw-bold">{{ contact.web }}</a></li>
            </ul>

            <hr class="border-light opacity-50">

            <h3 class="h5 mt-4 mb-3 text-warning">STACK TECHNIQUE</h3>
            
            {# BOUCLE SUR LES CATÉGORIES DE COMPÉTENCES TECHNIQUES (Back/Front/Outils) #}
            {% for category in technical_skills %}
                <p class="fw-bold mb-1 text-uppercase">{{ category.title }}</p>
                <div class="d-flex flex-wrap mb-3">
                    {# BOUCLE SUR LES ITEMS TECHNIQUES #}
                    {% for item in category.items %}
                        <span class="badge {{ category.color }} text-dark skill-badge">{{ item }}</span>
                    {% endfor %}
                </div>
            {% endfor %}
            
            <hr class="border-light opacity-50">

            <h3 class="h5 mt-4 mb-3 text-warning">FORMATION</h3>
            {# BOUCLE SUR LES FORMATIONS #}
            {% for diploma in education %}
                <p class="mb-1"><strong>{{ diploma.title }}</strong></p>
                {% if diploma.details is not empty %}
                    <p class="small text-light">{{ diploma.details }}</p>
                {% endif %}
            {% endfor %}
            
            <hr class="border-light opacity-50">

            <h3 class="h5 mt-4 mb-3 text-warning">CENTRES D'INTÉRÊTS</h3>
            <ul class="list-unstyled small">
                {# BOUCLE SUR LES CENTRES D'INTÉRÊTS #}
                {% for interest in interests %}
                    <li>
                        {# Icônes dynamiques ou par défaut #}
                        <i class="bi bi-{{ interest == 'Code informatique' ? 'code-slash' : 'heart' }}"></i>
                        {{ interest }}
                    </li>
                {% endfor %}
            </ul>

        </div>

        {# COLONNE DE DROITE : PROFIL, PROJETS & EXPÉRIENCE #}
        <div class="col-lg-8 main-content rounded-end">
            
            <h3 class="section-title">PROFIL DÉVELOPPEUR</h3>
            <p class="lead small">{{ profil.accroche | raw }}</p>
            
            <h3 class="section-title">PROJETS DE DÉVELOPPEMENT (Mise en pratique Symfony)</h3>

            <div class="border-start border-3 ps-3">
                
                {# BOUCLE SUR LES PROJETS #}
                {% for project in projects %}
                    <div class="mb-4">
                        <h4 class="h5 fw-bold text-dark">{{ project.title }}</h4>
                        <p class="text-muted mb-1">{{ project.period }}</p>

                        {# AJOUT DU LIEN VERS LE DÉTAIL DU PROJET #}
                        {% if project.url_detail is defined and project.url_detail is not empty %}
                            <a href="{{ project.url_detail }}" target="_blank" class="btn btn-sm btn-outline-primary mb-2 print-hidden">
                                <i class="bi bi-box-arrow-up-right me-1"></i> Voir le projet en ligne
                            </a>
                        {% endif %}
                        
                        {# DÉTAILS DU PROJET (Masqués à l'impression pour privilégier le lien) #}
                        <ul class="small project-details">
                            {# BOUCLE SUR LES DÉTAILS DU PROJET #}
                            {% for detail in project.details %}
                                <li>{{ detail | raw }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
            
            <h3 class="section-title experience-header">EXPÉRIENCE PROFESSIONNELLE (Compétences Transférables)</h3>

            <div class="border-start border-3 ps-3">
                
                {# BOUCLE SUR LE RÉSUMÉ D'EXPÉRIENCE #}
                {% for job in experience.details %}
                    <div class="mb-4">
                        <h4 class="h5 fw-bold text-dark">{{ job.title }}</h4>
                        <p class="text-muted mb-1">{{ job.company }} | {{ job.period }}</p>
                        <ul class="small">
                            {# BOUCLE SUR LES MISSIONS / COMPÉTENCES TRANSFÉRABLES #}
                            {% for mission in job.missions %}
                                <li>{{ mission }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

{# MESSAGE DE FIN DE PAGE #}
<div class="container mb-5">
    <div class="row">
        <div class="col-12">
            <div class="footer-message" id="footer-message-block">
                <p class="lead" id="visit-counter">
                    Merci d'avoir consulté mon CV en ligne ! Vous êtes la 
                    <strong>
                        {# LOGIQUE TWIG : Affichage dynamique du compteur et de l'unité #}
                        {{ total_views }}
                        {{ total_views == 1 ? 'ère' : 'ème' }}
                    </strong> 
                    personne à voir cette page.
                </p>
                <p class="h4 mt-3 text-primary fw-bold">
                    "Passons des chiffres du CV aux résultats de demain. Contactez-moi pour planifier notre succès !"
                </p>
                <a href="mailto:{{ contact.email }}" class="btn btn-primary btn-lg mt-3"><i class="bi bi-envelope"></i> Contacter {{ profil.prenom }} {{ profil.nom }}</a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script>
    // Script JS pour l'effet d'apparition du message de fin
    document.addEventListener('DOMContentLoaded', (event) => {
        const messageBlock = document.getElementById('footer-message-block');
        setTimeout(() => {
            messageBlock.classList.add('visible');
        }, 500); 
    });
</script>

</body>
</html>